<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Midnight Escape</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script src="game.js"></script>
</body>
</html>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html, body {
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
}
canvas {
  display: block;
  width: 100%;
  height: 100%;
}
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = { x: 100, y: 100, size: 20, speed: 2 };
let monster = { x: 300, y: 300, size: 30, speed: 1 };
let gun = { x: 600, y: 200, size: 15, found: false };
let hasGun = false;
let gameOver = false;
let keys = {};

// Controls
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Movement
function movePlayer() {
  if (keys['ArrowUp']) player.y -= player.speed;
  if (keys['ArrowDown']) player.y += player.speed;
  if (keys['ArrowLeft']) player.x -= player.speed;
  if (keys['ArrowRight']) player.x += player.speed;
}

// Monster AI
function moveMonster() {
  let dx = player.x - monster.x;
  let dy = player.y - monster.y;
  let distance = Math.sqrt(dx * dx + dy * dy);
  monster.x += (dx / distance) * monster.speed;
  monster.y += (dy / distance) * monster.speed;
}

// Draw functions
function drawPlayer() {
  ctx.fillStyle = 'white';
  ctx.fillRect(player.x, player.y, player.size, player.size);
}
function drawMonster() {
  ctx.fillStyle = 'red';
  ctx.fillRect(monster.x, monster.y, monster.size, monster.size);
}
function drawGun() {
  if (!gun.found) {
    ctx.fillStyle = 'gray';
    ctx.fillRect(gun.x, gun.y, gun.size, gun.size);
  }
}

// Collision
function checkCollision(a, b) {
  return (
    a.x < b.x + b.size &&
    a.x + a.size > b.x &&
    a.y < b.y + b.size &&
    a.y + a.size > b.y
  );
}

// Game loop
function updateGame() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  movePlayer();
  moveMonster();

  drawPlayer();
  drawMonster();
  drawGun();

  if (checkCollision(player, gun)) {
    gun.found = true;
    hasGun = true;
    alert("You found the gun!");
  }

  if (checkCollision(player, monster)) {
    if (hasGun) {
      alert("You shot the monster and survived!");
    } else {
      alert("You were caught by the monster!");
    }
    gameOver = true;
  }

  requestAnimationFrame(updateGame);
}

// Increase difficulty
setInterval(() => {
  monster.speed += 0.2;
}, 5000); // Monster gets faster every 5 seconds

updateGame();
